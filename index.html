<!DOCTYPE html>
<html>
  <head>
  <title>Candy Shop</title>    
  <link rel="stylesheet" href="candy-shop.css">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-debug.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/postal.js/2.0.5/postal.min.js" type="text/javascript"></script>
  <script src="lodash-template-adapter.js" type="text/javascript"></script>
  <script type="text/template" id="tmpl-product">
    <h3 data-bind="text: model.title"></h3>
    <span data-bind="text: model.price"></span>
    <button type="button" data-bind="click: addToBag">Add to bag</button>
  </script>
  <script type="text/template" id="tmpl-products-navigation">
    <button type="button" data-bind="click: prevPage, enable: hasLessPages">Verp</button>
    <span>Page: <span data-bind="text: currentPage" /></span>
    <button type="button" data-bind="click: nextPage, enable: hasMorePages">Next</button>
  </script>
  <script type="text/template" id="tmpl-bag-item">
    <h3 data-bind="text: model.title"></h3>
    <button type="button" data-bind="click: removeItem">-</button>
    <span> Quantity <span data-bind="text: model.quantity"></span> </span>
    <button type="button" data-bind="click: addItem">+</button>
</script>
  <script type="text/template" id="tmpl-products">
    <h3>Products</h3>
    <productsnavigation />
    <ul>
      <li data-bind="foreach: products">
        <product params="model: $data"/>
      </li>
    </ul>
  </script>
  <script type="text/template" id="tmpl-bag">
    <h3>Shopping Bag</h3>
    <p data-bind="visible: bag().length === 0">You have no items in your bag.</p>
    <ul>
      <li data-bind="foreach: bag">
        <bagitem params="model: $data" />
      </li>
    </ul>
  </script>
  <script type="text/template" id="tmpl-freeshipping">
    <p data-bind="visible: qualified">You qualify for FREE SHIPPING</p>
    <p data-bind="visible: qualified() === false">FREE SHIPPING in <span data-bind="text: threshold - subTotal()"></span></p>
  </script>
  <script type="text/template" id="tmpl-items-in-cart">
    <p>Items In Cart: <span data-bind="text: itemsInCart"></span></p>
  </script>
  
  <script type="text/template" id="tmpl-cart">
    <div id="cart">
      <h1 data-bind="text: title"></h1>
      <freeshipping />
      <itemsInCart />
      <products />
      <hr>
      <bag />      
      <hr>
      <div data-bind="visible: show">
        <h3>Current Cost</h3>
        <div>
          <b>subtotal:</b> <var data-bind="text: subtotal"></var>
        </div>
        <div>
          <b>tax:</b> <var data-bind="text: tax"></var>
        </div>
        <div>
          <b>total:</b> <var data-bind="text: total"></var>
        </div>        
      </div>
    </div>
  </script>
  </head>
  <body>
    <div id="app">
      <cart />
    </div>
    <script type="text/javascript" src="candy-shop.js"></script>
  </body>
</html>
