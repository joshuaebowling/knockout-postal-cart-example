<!DOCTYPE html>
<html>
  <head>
  <title>Candy Shop</title>    
  <link rel="stylesheet" href="candy-shop.css">
  <script type="text/template" id="tmpl-message">
    <div class="message" data-bind="visible: show">
      <h3 class="message-type" data-bind="text: type"></h3>
      <span class="message-text" data-bind="text: text"></span>
      <button data-bind="click: dismiss" type="button">Dismiss</button>
    </div>
  </script>
  <script type="text/template" id="tmpl-product">
    <h3 data-bind="text: model.title"></h3>
    <span data-bind="text: model.price"></span>
    <p> only  <span data-bind="text: model.available"></span> left</p>
    <button type="button" data-bind="click: addToBag">Add to bag</button>
  </script>
  <script type="text/template" id="tmpl-products-navigation">
    <button type="button" data-bind="click: prevPage, enable: hasLessPages">Verp</button>
    <span>Page: <span data-bind="text: currentPage" /> of <span data-bind="text: totalPages" /></span>
    <button type="button" data-bind="click: nextPage, enable: hasMorePages">Next</button>
  </script>
  <script type="text/template" id="tmpl-cart-item">
    <button type="button" data-bind="click: removeItem">-</button>
    <h3 class="cart-item">
      <span data-bind="text: model.title"></span>
     (<span data-bind="text: model.quantity"></span>)
    </h3>
    <button type="button" data-bind="click: addItem">+</button>
    
</script>
  <script type="text/template" id="tmpl-products">
    <h3>Products</h3>
    <productsnavigation />
    <ul data-bind="foreach: products">
      <li>
        <product params="model: $data"/>
      </li>
    </ul>
  </script>
  <script type="text/template" id="tmpl-certifications-filter">
    <h3>Certifications</h3>
    <select data-bind="options: certifications, selectedOptions: selectedCertifications" multiple="true">      
    </select>
  </script>
  <script type="text/template" id="tmpl-cart">
    <h3>Shopping Bag</h3>
    <p data-bind="visible: bag().length === 0">You have no items in your bag.</p>
    <ul>
      <li data-bind="foreach: bag">
        <cartitem params="model: $data" />
      </li>
    </ul>
  </script>
  <script type="text/template" id="tmpl-freeshipping">
    <p data-bind="visible: qualified">You qualify for FREE SHIPPING</p>
    <p data-bind="visible: qualified() === false">FREE SHIPPING in <span data-bind="text: threshold - subTotal()"></span></p>
  </script>
  <script type="text/template" id="tmpl-items-in-cart">
    <p>Items In Cart: <span data-bind="text: itemsInCart"></span></p>
  </script>
  
  <script type="text/template" id="tmpl-app">
    <div id="app">
      <freeshipping />
      <certificationsfilter />
      <message />
      <itemsInCart />
      <products />
      <hr>
      <cart />      
      <hr>
      <div data-bind="visible: show">
        <h3>Current Cost</h3>
        <div>
          <b>subtotal:</b> <var data-bind="text: subtotal"></var>
        </div>
        <div>
          <b>tax:</b> <var data-bind="text: tax"></var>
        </div>
        <div>
          <b>total:</b> <var data-bind="text: total"></var>
        </div>        
      </div>
    </div>
  </script>
  <script type="text/template" id="tmpl-app">
    <h1 data-bind="text: title"></h1>
    <cart>
  </script>

  </head>
  <body>
    <div id="container">
      <app />
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="ko.bundle.js"></script>
  </body>
</html>
